## 从算法到RTL实现的基础知识



## § 什么是算法的定点化？

### 1.为什么要进行浮点数的定点化？

+ 数据运算中，会出现像3.14这样的浮点数；
+ 硬件电路的底层实现中，为不同模块之间的连线（wire），没有“小数点”的概念；
+ 因此，因为浮点运算的需要，人为的指定某根线作为小数点，以此来实现浮点在芯片中的定点化；

### 2.哪些芯片的设计需要用到浮点数值的定点？

+ 通讯芯片：5G，WiFi...（调制解调、均衡器、MIMO）
+ DSP：MCU + 硬件加速核
+ 加密芯片；

### 3.最简定点化方法：算log2（a）

+ 要求：输入最大值为100，精度0.001，有符号；求input最少需要多少位？


+ 推导步骤

    + log2（100）=6.6439

    + 整数部分用7位表示；(6.6439向上取整)

        > 2^6 = 64， 2^7=128

    + log2(0.001) = -9.9658；（9.9658向上取整）

    + 小数部分使用10位表示

        > 2^-10 =  9.7656e-04

    + 有符号：使用1位

    + 共计：7+10+1=18

## § RTL中数据截取的数学意义

+ 截取的数值变化

    > assign a = b[3:2];
    >
    > a = b/4

+ 验证指标

    + 关键性能指标核验：

        + 与tb文件相比较，中间数据可存在不一致，但在输出的关键性能指标上符合要求；
        + 3GPP（EVM=-30dB），WiFi（EUM）

    + 数值严格核验：

        + 中间的每一步数据都要与tb对应；

        + 实际应用中，为了保留精度，常使用四舍五入，此时与截取的数值严格核验要求会产生冲突；

            > 四舍五入：15/4=3.75=4
            >
            > 截取后两位：15/4=3

## § 怎样实现四舍五入取整

## § RTL中如何实现溢出保护

## § 带浮点数的加减法实现举例

## § 有符号数的加减法举例